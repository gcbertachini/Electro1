Version 4
SHEET 1 880 680
WIRE 176 16 32 16
WIRE 336 16 176 16
WIRE 560 16 336 16
WIRE 688 16 560 16
WIRE 32 32 32 16
WIRE 560 96 560 16
WIRE 176 112 176 16
WIRE 32 160 32 112
WIRE 64 160 32 160
WIRE 112 160 64 160
WIRE 336 160 336 16
WIRE 688 160 688 96
WIRE 272 208 176 208
WIRE 560 272 560 176
WIRE 560 272 448 272
WIRE 336 336 336 256
WIRE 560 336 560 272
WIRE 448 416 448 272
WIRE 448 416 384 416
WIRE 512 416 448 416
WIRE 336 496 336 432
WIRE 448 496 336 496
WIRE 560 496 560 432
WIRE 560 496 448 496
WIRE 448 528 448 496
FLAG 688 160 0
FLAG 64 160 vin
FLAG 448 528 0
FLAG 560 16 Vcc
SYMBOL npn 112 112 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL npn 272 160 R0
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL res 16 16 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL voltage 688 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc
SYMATTR Value 9
SYMBOL res 544 80 R0
SYMATTR InstName Rref
SYMATTR Value {Rr}
SYMBOL nmos 512 336 R0
SYMATTR InstName M1
SYMATTR Value BS170
SYMBOL nmos 384 336 M0
SYMATTR InstName M2
SYMATTR Value BS170
TEXT -104 368 Left 2 !.tran 0 10 0
TEXT -104 400 Left 2 ;.step param Rr 100 1000 100
TEXT -104 432 Left 2 !.param Rr=650
